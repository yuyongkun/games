function JicemoonMobileTouch(o,n){var e=!1,t={tap:null,swipe:null,touchStart:null,touchMove:null,touchEnd:null};for(var a in n)t[a]=n[a],n[a]&&(e=!0);n=t,e&&m();var c,r=this;this.swipeTime=200,this.tap=function(e){c||m(),n.tap=e},this.touchStart=function(e){c||m(),n.touchStart=e},this.touchMove=function(e){c||m(),n.touchMove=e},this.touchEnd=function(e){c||m(),n.touchEnd=e},this.swipe=function(e){c||m(),n.swipe=e},this.allEvents=function(e){c||m(),n.tap=e,n.touchStart=e,n.touchMove=e,n.touchEnd=e,n.swipe=e},this.removeEvents=function(e){for(var t=e.split(" "),o=0;o<t.length;o++){switch(t[o].replace(" ")){case"tap":n.tap=null;break;case"touchStart":n.touchStart=null;break;case"touchMove":n.touchMove=null;break;case"touchEnd":n.touchEnd=null;break;case"swipe":n.swipe=null}}!c||n.tap||n.touchStart||n.touchMove.touchEnd||n.swipe||l()},this.removeAllEvents=function(){n.tap=null,n.touchStart=null,n.touchMove=null,n.touchEnd=null,n.swipe=null,c&&l()};var s={};function u(){s.evt&&(s.evt.stopPropagation?s.evt.stopPropagation():s.evt.cancelBubble=!0)}function v(){s.evt&&(s.evt.preventDefault?s.evt.preventDefault():s.evt.returnValue=!1)}function i(e){e=e||window.event,s.evt=e;var t={};switch(t.stopPropagation=u,t.preventDefault=v,t.touch=r,t.target=o,e.type){case"touchstart":t.type="touchStart",s.startTime=(new Date).getTime(),t.pageX=e.targetTouches[0].pageX,t.pageY=e.targetTouches[0].pageY,t.screenX=e.targetTouches[0].screenX,t.screenY=e.targetTouches[0].screenY,s.startScreenX=t.screenX,s.startScreenY=t.screenY,s.startPageX=t.pageX,s.startPageY=t.pageY,n.touchStart&&n.touchStart(t);break;case"touchmove":t.type="touchMove",t.pageX=e.targetTouches[0].pageX,t.pageY=e.targetTouches[0].pageY,t.screenX=e.targetTouches[0].screenX,t.screenY=e.targetTouches[0].screenY,t.moveTotalScreenX=t.screenX-s.startScreenX,t.moveTotalScreenY=t.screenY-s.startScreenY,t.moveTotalPageX=t.pageX-s.startPageX,t.moveTotalPageY=t.pageY-s.startPageY,n.touchMove&&n.touchMove(t);break;case"touchend":t.type="touchEnd",t.pageX=e.changedTouches[0].pageX,t.pageY=e.changedTouches[0].pageY,t.screenX=e.changedTouches[0].screenX,t.screenY=e.changedTouches[0].screenY,s.moveTotalX=t.screenX-s.startScreenX,s.moveTotalY=t.screenY-s.startScreenY,s.move=!(Math.abs(s.moveTotalX)<=1&&Math.abs(s.moveTotalY)<=1),h(t);break;case"mousedown":t.type="touchStart",s.startTime=(new Date).getTime(),s.mouseDown=!0,t.pageX=e.clientX,t.pageY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,s.startScreenX=t.screenX,s.startScreenY=t.screenY,s.startPageX=t.pageX,s.startPageY=t.pageY,s.move=!1,n.touchStart&&n.touchStart(t);break;case"mousemove":t.time=(new Date).getTime()-s.startTime,s.mouseDown&&(t.type="touchMove",t.pageX=e.clientX,t.pageY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,t.moveTotalScreenX=t.screenX-s.startScreenX,t.moveTotalScreenY=t.screenY-s.startScreenY,t.moveTotalPageX=t.pageX-s.startPageX,t.moveTotalPageY=t.pageY-s.startPageY,s.move||(s.move=!0),n.touchMove&&n.touchMove(t));break;case"mouseout":s.mouseDown=!1;break;case"mouseup":t.type="touchEnd",s.mouseDown=!1,t.pageX=e.clientX,t.pageY=e.clientY,t.screenX=e.screenX,t.screenY=e.screenY,s.moveTotalX=t.screenX-s.startScreenX,s.moveTotalY=t.screenY-s.startScreenY,h(t)}}function h(e){(e.time=(new Date).getTime()-s.startTime,s.move)?(e.moveTotalScreenX=s.moveTotalX,e.moveTotalScreenY=s.moveTotalY,e.moveTotalPageX=e.pageX-s.startPageX,e.moveTotalPageY=e.pageY-s.startPageY,Math.abs(s.moveTotalX/s.moveTotalY)<1?s.moveTotalY<0?e.direction="up":e.direction="down":s.moveTotalX<0?e.direction="left":e.direction="right",e.time<r.swipeTime&&n.swipe?(e.type="swipe",n.swipe(e)):n.touchEnd&&n.touchEnd(e)):n.tap&&(e.type="tap",n.tap(e))}function m(){p()?(o.addEventListener("touchstart",i),o.addEventListener("touchmove",i),o.addEventListener("touchend",i)):o.addEventListener?(o.addEventListener("mousedown",i),o.addEventListener("mousemove",i),o.addEventListener("mouseup",i),o.addEventListener("mouseout",i)):o.attachEvent?(o.attachEvent("onmousedown",i),o.attachEvent("onmousemove",i),o.attachEvent("onmouseup",i),o.attachEvent("onmouseout",i)):(o.onmousedown=i,o.onmousemove=i,o.onmouseup=i,o.onmouseup=i),c=!0}function l(){p()?(o.removeEventListener("touchstart",i),o.removeEventListener("touchmove",i),o.removeEventListener("touchend",i)):o.removeEventListener?(o.removeEventListener("mousedown",i),o.removeEventListener("mousemove",i),o.removeEventListener("mouseup",i),o.removeEventListener("mouseout",i)):o.detachEvent?(o.detachEvent("onmousedown",i),o.detachEvent("onmousemove",i),o.detachEvent("onmouseup",i),o.detachEvent("onmouseout",i)):(o.onmousedown=null,o.onmousemove=null,o.onmouseup=null,o.onmouseup=null),c=!1}function p(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}s.mouseDown=!1,s.startTime=0}window.jQuery&&function(r){r.prototype.addTouchEvent=function(e,t){for(var o=e.split(" "),n={},a=0;a<o.length;a++){var c=o[a].replace(" ");0<c.length&&(n[c]=t)}return this.each(function(){new JicemoonMobileTouch(r(this)[0],n)})},r.prototype.addTap=function(e){return this.each(function(){new JicemoonMobileTouch(r(this)[0],{tap:e})})},r.prototype.addTouchEvents=function(e){return this.each(function(){new JicemoonMobileTouch(r(this)[0]).allEvents(e)})}}(jQuery);